<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>Sample 04</title>
</head>
<body>

<h1>sample04</h1>

<input type="text" class="key" value="key1" size="5">
<input type="text" class="textValue">
<button class="save">保存</button>
<button class="restore">復元</button>
<button class="delete">消去</button>

<script>

(function(){
	var storage = window.sessionStorage;
	// console.log(storage);

	var appkey ='myapp';

	var data = {};

  var keyField = document.querySelector('.key');
	var textField = document.querySelector('.textValue');

	document.querySelector('.save').addEventListener('click' , function(){
		data[keyField.value] = textField.value;
 		storage.setItem(appkey , JSON.stringify(data));
	});
  document.querySelector('.restore').addEventListener('click' , function(){
		data = JSON.parse(storage.getItem(appkey));
 		textField.value = data[keyField.value];
	});

	document.querySelector('.delete').addEventListener('click' , function(){
	 delete data[keyField.value];
	 storage.setItem(appkey , JSON.stringify(data));

	});

})();


</script>

</body>
</html>
